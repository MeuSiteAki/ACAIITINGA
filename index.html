<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A√ßaiteria Itinga</title>

  <!-- SweetAlert2 & QRCode -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Firebase (FireStore) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
    import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "SUA_API_KEY",
      authDomain: "acai123-4ad1a.firebaseapp.com",
      projectId: "acai123-4ad1a",
      storageBucket: "acai123-4ad1a.firebasestorage.app",
      messagingSenderId: "423472519123",
      appId: "1:423472519123:web:b8795b57e347f473d7c126",
      measurementId: "G-K86FBM1JE5"
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);

    async function salvarPedido(pedido) {
      try {
        await addDoc(collection(db, "pedidos"), pedido);
        console.log("‚úÖ Pedido salvo no Firestore");
      } catch (e) {
        console.error("‚ùå Erro ao salvar pedido:", e);
      }
    }

    const pedidosRef = collection(db, "pedidos");
    onSnapshot(pedidosRef, (snapshot) => {
      snapshot.docChanges().forEach((change) => {
        if (change.type === "added") {
          console.log("üì• Novo pedido:", change.doc.data());
        }
      });
    });

    window.__db = db;
    window.__salvarPedido = salvarPedido;
  </script>

  <style>
   :root {
    --primary: #8e44ad;
    --primary-dark: #6d2c91;
    --accent: #f1c40f;
    --danger: #e74c3c;
    --bg: #faf6ff;
    --text: #2d3142;
    --muted: #7786a5;
    --card: #ffffff;
    --shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
    --radius: 16px;
  }

  * { box-sizing: border-box }

  body {
    margin: 0;
    font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: linear-gradient(180deg, #f8eaff, var(--bg));
    color: var(--text);
    padding-bottom: 70px; /* espa√ßo para o resumo fixo */
  }

  /* Header fixo no topo */
  header {

    top: 0;
    z-index: 1000;
    background: linear-gradient(90deg, var(--primary), var(--primary-dark));
    color: #fff;
    padding: 12px 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow);
  }

  .logo-wrap { display: flex; align-items: center; gap: 12px; }
  .logo-img { width: 100px; height: 100px; border-radius: 20px; object-fit: cover; }
  .brand { font-size: 28px; font-weight: 800; }

  .btn-menu-header {
    
    background: transparent; border: none; color: #fff; font-size: 28px; cursor: pointer; transition: transform 0.2s;
  }
  .btn-menu-header:hover { transform: translateY(-50%) scale(1.2); color: #ffe58a; }

  .container { max-width: 1024px; margin: 20px auto; padding: 0 16px 10px }

  /* Cards */
  .card { border-radius: var(--radius); box-shadow: var(--shadow); padding: 16px; margin-bottom: 16px; color: #fff; }
  .theme-purple { background: linear-gradient(135deg, #9b59b6, #8e44ad) }
  .theme-pink   { background: linear-gradient(135deg, #d2527f, #8e44ad) }
  .theme-vinho  { background: linear-gradient(135deg, #6d214f, #b33771) }
  .theme-orange { background: linear-gradient(135deg, #f39c12, #d35400) }
  .theme-red    { background: linear-gradient(135deg, #e74c3c, #c0392b) }
  .card h3 { margin: 0 0 10px; font-size: 22px }

  /* Tamanhos */
  .sizes { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px }
  .size {
    background: #fff; color: #2d3142;
    border-radius: 14px; padding: 12px; text-align: center;
    font-weight: 700; box-shadow: var(--shadow);
  }
  .size img {
    width: 64px; height: 64px; margin-bottom: 6px;
    border-radius: 50%;
    filter: drop-shadow(0 6px 10px rgba(0,0,0,0.15));
  }
  .size .sub { font-size: 12px; color: #556 }
  .size .price { margin-top: 4px; color: var(--primary-dark) }

  /* Op√ß√µes */
  .options { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; }
  .option {
    background: #fff; color: #2d3142;
    border-radius: 12px; padding: 10px;
    display: flex; align-items: center; gap: 10px;
    font-weight: 600; box-shadow: var(--shadow);
  }
  .option.disabled { opacity: .5; pointer-events: none }

  input[type=checkbox], input[type=radio] {
    width: 26px; height: 26px;
    accent-color: var(--primary); cursor: pointer;
  }

  /* Inputs */
  .input textarea, .input input, .input select {
    width: 100%; border: 2px solid #eaeef5; border-radius: 10px;
    padding: 10px; font-size: 14px; outline: none; background: #fff; color: #2d3142;
  }
  .input textarea:focus, .input input:focus, .input select:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 4px rgba(142,68,173,0.12);
  }

  /* Bot√µes */
  .actions { display: flex; gap: 12px; flex-wrap: wrap }
  .btn {
    border: none; border-radius: 999px;
    padding: 12px 16px; font-weight: 700; cursor: pointer;
    display: inline-flex; align-items: center; gap: 8px;
    box-shadow: var(--shadow);
  }
  .btn.primary   { background: var(--primary); color: #fff }
  .btn.secondary { background: var(--accent);  color: #3b2400 }
  .btn.ghost     { background: #fff; color: var(--primary-dark); border: 2px solid #eee }
  .btn.whatsapp  {
    background: #25D366; color: #fff; font-size: 16px;
    justify-content: center; width: 100%;
  }

  /* Carrinho */
  .cart-panel {
    position: fixed; top: 0; right: 0;
    width: min(400px, 90vw); height: 100vh;
    background: #fdf9ff;
    box-shadow: -12px 0 24px rgba(0,0,0,0.14);
    transform: translateX(105%);
    transition: transform 0.3s ease;
    z-index: 1100; /* acima do header/logo */
    display: flex; flex-direction: column;
    border-left: 6px solid #9b59b6;
    border-radius: 16px 0 0 16px;
  }
  .cart-panel.open { transform: translateX(0) }

  .cart-header {
    padding: 16px;
    background: linear-gradient(90deg, #9b59b6, #8e44ad);
    color: #fff;
    display: flex; align-items: center; justify-content: space-between;
    font-weight: 800;
    border-radius: 16px 0 0 0;
  }

  .cart-items {
    flex-grow: 1; overflow-y: auto; padding: 8px;
    display: grid; gap: 6px;
  }
  .cart-item {
    background: #fff; border: 1px solid #eef1f5;
    border-radius: 12px; padding: 10px;
    box-shadow: var(--shadow);
  }
  .cart-title { font-weight: 800; font-size: 15px; color: #1b1f2a }
  .cart-price { font-weight: 800; font-size: 15px; color: #8e44ad }

  .total-bar {
    background: #f3e5f5; padding: 12px; font-weight: 800;
    text-align: right; font-size: 18px;
    border-top: 2px solid #eaeef5; color: #8e44ad;
  }

  /* Form no carrinho */
  .form { padding: 12px; display: grid; gap: 8px }

  /* Resumo fixo do pedido */
.cart-summary {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: var(--primary-dark);
  color: #fff;
  display: flex;
  justify-content: space-between; /* garante que cada lado fique alinhado */
  align-items: center;
  padding: 12px 20px;
  font-weight: 700;
  font-size: 16px;
  box-shadow: 0 -4px 12px rgba(0,0,0,0.15);
  z-index: 950;
  gap: 20px; /* espa√ßo entre os lados */
}

.cart-summary .left {
  display: flex;
  flex-direction: column; /* üî• coloca Itens e Total um embaixo do outro */
  align-items: flex-start;
  gap: 6px;
}

.cart-summary .badge {
  color: rgb(255, 255, 255);
  border-radius: 999px;
  padding: 6px 10px;
  font-weight: 800;
}

#summaryOpen {
  background: linear-gradient(135deg, #25D366, #128C7E);
  color: #fff;
  font-size: 18px;
  font-weight: 800;
  padding: 14px 28px;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  box-shadow: 0 6px 15px rgba(0,0,0,0.25);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

#summaryOpen:hover {
  transform: scale(1.08);
  box-shadow: 0 10px 25px rgba(0,0,0,0.35);
  background: linear-gradient(135deg, #128C7E, #0d6d5a);
}

  .cart-summary button {
    background: #fff; color: var(--primary-dark);
    border: none; border-radius: 999px;
    padding: 8px 14px; font-weight: 700; cursor: pointer;
  }

  /* Bot√£o mostrar/ocultar copos */
  .toggle-wrap { text-align:center; margin:20px 0 }
  .toggle-btn {
    background: linear-gradient(135deg, #9b59b6, #8e44ad);
    color: #fff; font-size: 22px; font-weight: 800;
    padding: 18px 40px; border: none; border-radius: 50px;
    cursor: pointer; box-shadow: 0 10px 25px rgba(0,0,0,0.25);
    transition: transform 0.25s ease, box-shadow 0.25s ease;
  }
  .toggle-btn:hover { transform: scale(1.07); box-shadow: 0 14px 35px rgba(0,0,0,0.35) }

  /* Side menu */
  .side-menu {
    position: fixed; top: 0; right: -320px;
    width: 300px; height: 100%;
    background: #fff; box-shadow: -6px 0 15px rgba(0,0,0,0.2);
    transition: right 0.3s ease; z-index: 1002;
    display: flex; flex-direction: column;
  }
  .side-menu.open { right: 0; }
  .side-header { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: var(--primary); color: #fff; }
  .side-header h3 { margin: 0; font-size: 18px; }
  .side-header button { background: transparent; border: none; color: #fff; font-size: 20px; cursor: pointer; }
  .side-form { padding: 15px; display: flex; flex-direction: column; gap: 10px; }
  .side-form textarea { width: 100%; height: 120px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; resize: vertical; }
  .btn-send {
    background: #25D366; color: #fff; border: none;
    padding: 12px; border-radius: 8px; font-weight: bold;
    cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
  }
  .btn-send:hover { background: #1ebe5d; }

  /* Media queries */
  @media (max-width: 640px) { .sizes { grid-template-columns: 1fr 1fr } }
  @media (max-width: 420px) { .sizes { grid-template-columns: 1fr } }

  #summaryOpen {
  background: linear-gradient(135deg, #25D366, #128C7E); /* verde estilo WhatsApp */
  color: #fff;
  font-size: 15px;
  font-weight: 800;

  border: none;
  border-radius: 50px;
  cursor: pointer;
  box-shadow: 0 6px 15px rgba(0,0,0,0.25);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

#summaryOpen:hover {
  transform: scale(1.08);
  box-shadow: 0 10px 25px rgba(0,0,0,0.35);
  background: linear-gradient(135deg, #128C7E, #0d6d5a);
}

  </style>
</head>

<body>
  <header>
    <div class="logo-wrap">
      <img src="a√ßai2.jpeg" alt="Logo A√ßaiteria" class="logo-img">
      <div class="brand">A√ßaiteria Itinga</div>
    </div>
    <button id="btnMenu" class="btn-menu-header" aria-label="Abrir menu lateral">
      <i class="fas fa-bars"></i>
    </button>
  </header>

  <main class="container">
    <div class="toggle-wrap">
      <button class="toggle-btn" id="toggleSizes">
        <i class="fas fa-glass-whiskey"></i> Mostrar tamanho do copo
      </button>
    </div>

    <section class="card theme-purple" id="sizesCard" style="display:none;">
      <h3>Tamanho do copo</h3>
      <div class="sizes" id="sizeGroup">
        <label class="size">
          <img src="a√ßai.jpg" alt="Copo 300" /><br>
          300ml<br><span class="sub">2 frutas ‚Ä¢ 2 ingredientes ‚Ä¢ 1 cobertura</span>
          <div class="price"><strong style="font-size: 20px;">R$ 10,00</strong></div>
          <input type="radio" name="size" value="300" data-price="10">
        </label>
        <label class="size">
          <img src="a√ßai.jpg" alt="Copo 400" /><br>
          400ml<br><span class="sub">3 frutas ‚Ä¢ 3 ingredientes ‚Ä¢ 1 cobertura</span>
          <div class="price"><strong style="font-size: 20px;">R$ 15,00</strong></div>
          <input type="radio" name="size" value="400" data-price="15">
        </label>
        <label class="size">
          <img src="a√ßai.jpg" alt="Copo 500" /><br>
          500ml<br><span class="sub">4 frutas ‚Ä¢ 4 ingredientes ‚Ä¢ 1 cobertura</span>
          <div class="price"><strong style="font-size: 20px;">R$ 20,00</strong></div>
          <input type="radio" name="size" value="500" data-price="20">
        </label>
      </div>
    </section>

    <section class="card theme-pink" id="fruitsSection">
      <h3><i class="fas fa-apple-alt"></i> Frutas</h3>
      <div class="options" id="fruits"></div>
    </section>

    <section class="card theme-vinho">
      <h3><i class="fas fa-seedling"></i> Ingredientes</h3>
      <div class="options" id="ingredients"></div>
    </section>

    <section class="card theme-orange">
      <h3><i class="fas fa-ice-cream"></i> Cobertura</h3>
      <div class="options" id="toppings"></div>
      <div class="input" style="margin-top:8px;">
        <span class="label">Opcional ‚Äî escolha se quiser.</span>
      </div>
    </section>

    <section class="card theme-red">
      <h3><i class="fas fa-comment-dots"></i> Observa√ß√µes</h3>
      <div class="input">
        <textarea id="notes" rows="3" placeholder="Ex.: pouco xarope, sem granola, ponto do a√ßa√≠‚Ä¶ (opcional)"></textarea>
      </div>
      <div class="actions" style="margin-top:10px;">
        <button class="btn ghost" id="reset">Limpar escolhas</button>
      </div>
    </section>
    <!-- üî• Bot√£o destacado fora do card -->
<div class="add-to-cart-wrap">
  <button class="btn add-to-cart-big" id="addToCart">
    <i class="fas fa-cart-plus"></i> Adicionar ao Carrinho
  </button>
</div>
  </main>
<style>
  .add-to-cart-wrap {
  text-align: center;
  margin: 25px 0;
}

.add-to-cart-big {
  background: linear-gradient(135deg, #029402, #47ad44);
  color: #fff;
  font-size: 22px;
  font-weight: 800;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(0,0,0,0.25);
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  width: 100%; /* ocupa toda a largura */
  max-width: 380px; /* limite para n√£o ficar exagerado em telas grandes */
  text-align: center;
}

.add-to-cart-big:hover {
  transform: scale(1.05);
  box-shadow: 0 14px 35px rgba(0,0,0,0.35);
  background: linear-gradient(135deg, #47ad44, #029402);
}

</style>
  <!-- Carrinho lateral -->
  <aside class="cart-panel" id="cartPanel">
    <div class="cart-header">
      <strong>üõí Seu carrinho</strong>
      <button class="btn secondary" id="closeCart">Fechar</button>
    </div>

    <div class="cart-items" id="cartItems">
      <div class="empty">Seu carrinho est√° vazio. Selecione o tamanho do copo para come√ßar.</div>
    </div>
    <div class="total-bar" id="totalBar">Total: R$ 0,00</div>

    <div class="form">
      <div class="input"><span class="label">Nome</span><input id="name" type="text" placeholder="Seu nome" required></div>
      <div class="input"><span class="label">Telefone</span><input id="phone" type="tel" placeholder="(99) 9 9999-9999" required></div>
      <div class="input"><span class="label">Endere√ßo</span><input id="address" type="text" placeholder="Rua, n√∫mero" required></div>
      <div class="input">
        <span class="label">Bairro</span>
        <select id="neighborhood" required>
          <option value="" selected disabled>Bairro</option>
          <option value="Centro">Centro</option>
          <option value="Coqueiral">Coqueiral</option>
          <option value="Vila Emanuela">Vila Emanuela</option>
          <option value="C√©lio Braz">C√©lio Braz</option>
          <option value="Vila Samuel">Vila Samuel</option>
          <option value="Jardim Planalto">Jardim Planalto</option>
          <option value="Parq. Primavera">Parq. Primavera</option>
          <option value="S√£o Sebasti√£o">S√£o Sebasti√£o</option>
          <option value="Paraiso">Paraiso</option>
          <option value="S√£o Jo√£o">S√£o Jo√£o</option>
          <option value="Vila Jamily">Vila Jamily</option>
          <option value="Itinga-PA">Itinga-PA</option>
          <option value="Paulist√£o">Paulist√£o</option>
        </select>
      </div>
      <div class="input">
        <span class="label">Forma de pagamento</span>
        <select id="payment" required>
          <option value="" selected disabled>Selecione</option>
          <option>Dinheiro</option>
          <option>Cart√£o</option>
          <option>Pix</option>
        </select>
      </div>
      <div class="actions" style="justify-content:flex-end;">
        <button class="btn whatsapp" id="sendWhatsapp">Enviar pedido no WhatsApp</button>
      </div>
      <div class="label" style="text-align:right;">Envio para: 55 99 9224-7544</div>
    </div>
  </aside>

  <!-- Resumo fixo do pedido -->
  <div class="cart-summary" id="cartSummary">
  <div class="left">
    <span><i class="fas fa-shopping-basket"></i> Itens: <span class="badge" id="summaryCount">0</span></span>
    <span>Total: <span class="badge" id="summaryTotal">R$ 0,00</span></span>
  </div>
  <button id="summaryOpen">Ver carrinho</button>
</div>


  <!-- Menu lateral com formul√°rio -->
  <aside id="sideMenu" class="side-menu" aria-label="Menu lateral">
    <div class="side-header">
      <h3><i class="fas fa-comment-dots"></i> Fale Conosco</h3>
      <button id="closeMenu" aria-label="Fechar menu"><i class="fas fa-times"></i></button>
    </div>
    <form id="feedbackForm" class="side-form">
      <textarea id="feedbackText" placeholder="Escreva sua sugest√£o, reclama√ß√£o ou elogio..."></textarea>
      <button type="submit" class="btn-send"><i class="fab fa-whatsapp"></i> Enviar no WhatsApp</button>
    </form>
  </aside>

<footer>
  <div class="footer-container">
    <div class="footer-brand">
      <img src="a√ßai2.jpeg" alt="Logo A√ßaiteria" class="footer-logo">
      <div>
        <h3>A√ßaiteria Itinga</h3>
        <p>Feito com üíú em Itinga do Maranh√£o, MA</p>
      </div>
    </div>

    <div class="footer-social">
      <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
      <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
    </div>
  </div>

  <div class="footer-bottom">
    ¬© 2025 A√ßaiteria Itinga ‚Äî Todos os direitos reservados
  </div>
</footer>
<style>
  footer {
  background: linear-gradient(90deg, var(--primary-dark), var(--primary));
  color: #fff;
  padding: 30px 20px 15px;
  margin-top: 40px;
  box-shadow: 0 -4px 12px rgba(0,0,0,0.15);
}

.footer-container {
  max-width: 1024px;
  margin: 0 auto;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: 20px;
}

.footer-brand {
  display: flex;
  align-items: center;
  gap: 15px;
}

.footer-logo {
  width: 60px;
  height: 60px;
  border-radius: 12px;
  object-fit: cover;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

.footer-brand h3 {
  margin: 0;
  font-size: 20px;
  font-weight: 800;
}

.footer-brand p {
  margin: 2px 0 0;
  font-size: 14px;
  color: #ffe58a;
}

.footer-social {
  display: flex;
  gap: 16px;
}

.footer-social a {
  color: #fff;
  font-size: 22px;
  transition: transform 0.2s, color 0.2s;
}

.footer-social a:hover {
  color: #ffe58a;
  transform: scale(1.2);
}

.footer-bottom {
  text-align: center;
  margin-top: 20px;
  font-size: 14px;
  border-top: 1px solid rgba(255,255,255,0.2);
  padding-top: 10px;
  color: #ddd;
}

</style>

  <script>
    // Dados
    const FRUITS = ["Banana", "Morango", "Manga", "Kiwi", "Uva", "Abacaxi"];
    const INGREDIENTS = ["Granola", "Leite em p√≥", "Pa√ßoca", "Amendoim", "Jujuba", "Castanha"];
    const TOPPINGS = ["Chocolate", "Caramelo", "Leite condensado", "Morango"];

    const EMOJI = {
      Banana: "üçå", Morango: "üçì", Manga: "ü•≠", Kiwi: "ü•ù", Uva: "üçá", Abacaxi: "üçç",
      Granola: "ü•£", "Leite em p√≥": "ü•õ", Pa√ßoca: "ü•ú", Amendoim: "ü•ú", Jujuba: "üç¨", Castanha: "üå∞"
    };

    // PIX Config
    const PIX_KEY = '+5599992247544';
    const PIX_NAME = 'Carlos de Freitas Rocha';
    const PIX_BANK = 'Banco do Brasil';
    const PIX_CITY = 'IMPERATRIZ';

    // Elementos
    const sizeRadios = document.querySelectorAll('input[name="size"]');
    const fruitsWrap = document.getElementById('fruits');
    const ingredientsWrap = document.getElementById('ingredients');
    const toppingsWrap = document.getElementById('toppings');

    const resetBtn = document.getElementById('reset');
    const addToCartBtn = document.getElementById('addToCart');

    const cartPanel = document.getElementById('cartPanel');
    const closeCartBtn = document.getElementById('closeCart');
    const cartItems = document.getElementById('cartItems');
    const totalBar = document.getElementById('totalBar');

    const nameInput = document.getElementById('name');
    const phoneInput = document.getElementById('phone');
    const addressInput = document.getElementById('address');
    const neighborhoodInput = document.getElementById('neighborhood');
    const paymentInput = document.getElementById('payment');
    const sendWhatsappBtn = document.getElementById('sendWhatsapp');

    const fruitsSection = document.getElementById('fruitsSection');

    // Resumo fixo
    const summaryCount = document.getElementById('summaryCount');
    const summaryTotal = document.getElementById('summaryTotal');
    const summaryOpenBtn = document.getElementById('summaryOpen');

    // Toggle mostrar/ocultar copos
    const toggleSizesBtn = document.getElementById('toggleSizes');
    const sizesCard = document.getElementById('sizesCard');
    toggleSizesBtn.addEventListener('click', () => {
      const visible = sizesCard.style.display !== 'none';
      sizesCard.style.display = visible ? 'none' : 'block';
      toggleSizesBtn.innerHTML = visible
        ? '<i class="fas fa-glass-whiskey"></i> Mostrar tamanho do copo'
        : '<i class="fas fa-eye-slash"></i> Ocultar tamanho do copo';
    });

    // Estado
    let limits = { fruits: 0, ingredients: 0 };
    let cart = []; // agora com m√∫ltiplos itens
    let currentItem = { id: 1, size: null, price: 0, fruits: [], ingredients: [], topping: '', notes: '' };

    // Render options
    function createOption(labelText, name, type = "checkbox") {
      const d = document.createElement('label');
      d.className = 'option';
      d.innerHTML = `<input type="${type}" name="${name}" value="${labelText}"> ${labelText}`;
      return d;
    }
    FRUITS.forEach(f => fruitsWrap.appendChild(createOption(f, 'fruits')));
    INGREDIENTS.forEach(i => ingredientsWrap.appendChild(createOption(i, 'ingredients')));
    TOPPINGS.forEach(t => toppingsWrap.appendChild(createOption(t, 'toppings', 'radio')));

    // Reset radios ao abrir
    sizeRadios.forEach(r => r.checked = false);
    toppingsWrap.querySelectorAll('input[name="toppings"]').forEach(t => t.checked = false);

    // Limites por tamanho
    function updateLimitsFromSize() {
      const selected = document.querySelector('input[name="size"]:checked')?.value;
      if (selected === '300') limits = { fruits: 2, ingredients: 2 };
      else if (selected === '400') limits = { fruits: 3, ingredients: 3 };
      else if (selected === '500') limits = { fruits: 4, ingredients: 4 };
      else limits = { fruits: 0, ingredients: 0 };
      enforceLimits('fruits', limits.fruits);
      enforceLimits('ingredients', limits.ingredients);
    }

    function enforceLimits(groupName, max) {
      const inputs = document.querySelectorAll(`input[name="${groupName}"]`);
      const selectedCount = Array.from(inputs).filter(i => i.checked).length;
      inputs.forEach(i => {
        if (max === 0) {
          i.closest('.option')?.classList.add('disabled');
          i.checked = false;
        } else {
          if (!i.checked) i.closest('.option')?.classList.toggle('disabled', selectedCount >= max);
          else i.closest('.option')?.classList.remove('disabled');
        }
      });
    }

    // Toast
    function showToast(text, emoji = '') {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = `${emoji ? emoji + ' ' : ''}${text} adicionado`;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2200);
    }

    // Atualiza o item atual (n√£o mexe no carrinho)
    function updateCurrentItem() {
      const sizeInput = document.querySelector('input[name="size"]:checked');
      currentItem.size = sizeInput?.value || null;
      currentItem.price = Number(sizeInput?.dataset?.price || 0);
      currentItem.fruits = Array.from(document.querySelectorAll('input[name="fruits"]:checked')).map(i => i.value);
      currentItem.ingredients = Array.from(document.querySelectorAll('input[name="ingredients"]:checked')).map(i => i.value);
      currentItem.topping = document.querySelector('input[name="toppings"]:checked')?.value || '';
      currentItem.notes = document.getElementById('notes').value.trim();
      // n√£o atualiza cart aqui; s√≥ no addToCart()
    }

    // Eventos para atualizar item atual
    document.querySelectorAll('input[name="size"], input[name="fruits"], input[name="ingredients"], input[name="toppings"]').forEach(inp => {
      inp.addEventListener('change', () => {
        if (inp.name === 'fruits' || inp.name === 'ingredients') {
          const max = inp.name === 'fruits' ? limits.fruits : limits.ingredients;
          const inputs = document.querySelectorAll(`input[name="${inp.name}"]`);
          const count = Array.from(inputs).filter(i => i.checked).length;
          if (count > max) {
            inp.checked = false;
          } else if (inp.checked) {
            const emoji = EMOJI[inp.value] || '';
            showToast(inp.value, emoji);
          }
          enforceLimits(inp.name, max);
        }
        if (inp.name === 'size') {
          updateLimitsFromSize();
          fruitsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        updateCurrentItem();
      });
    });
    document.getElementById('notes').addEventListener('input', updateCurrentItem);
    updateLimitsFromSize();
    updateCurrentItem();

    // Adicionar ao carrinho
    function addToCart() {
      if (!currentItem.size) {
        Swal.fire({ icon: 'info', title: 'Escolha o tamanho', text: 'Selecione o tamanho do copo antes de adicionar.' });
        return;
      }
      const newItem = { ...currentItem, id: Date.now() };
      cart.push(newItem);
      renderCart();
      // Limpa sele√ß√µes para montar outro copo
      resetSelections(false); // false = n√£o limpa carrinho
      openCart(); // mostra o carrinho
    }
    addToCartBtn.addEventListener('click', addToCart);

    // Abrir/fechar carrinho
    function openCart() { cartPanel.classList.add('open'); }
    function closeCart() { cartPanel.classList.remove('open'); }
    closeCartBtn.addEventListener('click', closeCart);
    summaryOpenBtn.addEventListener('click', openCart);

    // Reset de escolhas
    function resetSelections(clearCart = true) {
      document.querySelectorAll('input[name="size"]').forEach(r => r.checked = false);
      document.querySelectorAll('input[name="fruits"]').forEach(i => i.checked = false);
      document.querySelectorAll('input[name="ingredients"]').forEach(i => i.checked = false);
      document.querySelectorAll('input[name="toppings"]').forEach(t => t.checked = false);
      document.getElementById('notes').value = '';
      limits = { fruits: 0, ingredients: 0 };
      enforceLimits('fruits', 0);
      enforceLimits('ingredients', 0);
      currentItem = { id: 1, size: null, price: 0, fruits: [], ingredients: [], topping: '', notes: '' };
      if (clearCart) cart = [];
      updateCurrentItem();
      renderCart();
    }
    resetBtn.addEventListener('click', () => resetSelections(true));

    function formatBRL(n) { return n.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' }) }

    // Renderiza√ß√£o do carrinho
    function renderCart() {
      cartItems.innerHTML = '';
      if (cart.length === 0) {
        cartItems.innerHTML = '<div class="empty">Seu carrinho est√° vazio. Selecione o tamanho do copo para come√ßar.</div>';
        updateTotalsUI(); return;
      }
      cart.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <div class="top" style="display:flex;align-items:center;justify-content:space-between;gap:8px;">
            <div class="cart-title">Copo ${item.size}ml</div>
            <div style="display:flex;align-items:center;gap:8px;">
              <div class="cart-price">${formatBRL(item.price)}</div>
              <button class="btn ghost btn-remove" data-index="${index}" title="Remover">Remover</button>
            </div>
          </div>
          <div class="list-row"><strong>Frutas:</strong> ${item.fruits.join(', ') || '-'}</div>
          <div class="list-row"><strong>Ingredientes:</strong> ${item.ingredients.join(', ') || '-'}</div>
          <div class="list-row"><strong>Cobertura:</strong> ${item.topping || '-'}</div>
          ${item.notes ? `<div class="list-row"><strong>Obs.:</strong> ${item.notes}</div>` : ''}
        `;
        cartItems.appendChild(div);
      });

      // Eventos de remover
      document.querySelectorAll('.btn-remove').forEach(btn => {
        btn.addEventListener('click', e => {
          const idx = Number(e.currentTarget.dataset.index);
          cart.splice(idx, 1);
          renderCart();
        });
      });

      updateTotalsUI();
    }

    function cartTotals() {
      const total = cart.reduce((s, i) => s + i.price, 0);
      const count = cart.length;
      return { total, count };
    }

    function updateTotalsUI() {
      const { total, count } = cartTotals();
      totalBar.textContent = `Total: ${formatBRL(total)}`;
      sendWhatsappBtn.disabled = cart.length === 0;
      summaryCount.textContent = String(count);
      summaryTotal.textContent = formatBRL(total);
    }

    // M√°scara telefone
    phoneInput.addEventListener('input', () => {
      let v = phoneInput.value.replace(/\D/g, '');
      v = v.replace(/^(\d{2})(\d)/, '($1) $2').replace(/(\d{5})(\d)/, '$1-$2');
      phoneInput.value = v.slice(0, 15);
    });

    // Pagamento (PIX e Dinheiro)
    paymentInput.addEventListener('change', async () => {
      const total = cart.reduce((sum, i) => sum + i.price, 0);
      const val = paymentInput.value;

      if (val === 'Pix') {
        if (total <= 0) {
          await Swal.fire({ icon: 'info', title: 'Carrinho vazio', text: 'Adicione itens para gerar o Pix.' });
          paymentInput.value = ''; return;
        }
        const code = buildPixBRCode({ key: PIX_KEY, name: PIX_NAME, city: PIX_CITY, amount: total, txid: 'ACAI' });
        const canvas = document.createElement('canvas');
        await QRCode.toCanvas(canvas, code, { width: 220 });
        const dataUrl = canvas.toDataURL();

        Swal.fire({
          title: 'Pagamento via Pix',
          html: `
            <div style="display:grid;gap:12px;place-items:center">
              <img src="${dataUrl}" alt="QR Pix" style="width:220px;height:220px;border:1px solid #eee;border-radius:8px"/>
              <div style="display:flex;gap:8px;width:100%;">
                <textarea id="pixCodeTA" readonly style="flex:1;height:100px;font-size:12px;">${code}</textarea>
                <button id="copyPixBtn" class="swal2-confirm swal2-styled" style="background:#8e44ad;white-space:nowrap;">Copiar</button>
              </div>
              <small style="color:#7786a5">Copie o c√≥digo de pagamento e cole no seu app do banco.</small>
            </div>
          `,
          width: 520,
          showConfirmButton: false,
          didOpen: () => {
            const btn = document.getElementById('copyPixBtn');
            btn?.addEventListener('click', async () => {
              const ta = document.getElementById('pixCodeTA');
              await navigator.clipboard.writeText(ta.value);
              Swal.fire({ toast: true, position: 'top', icon: 'success', title: 'C√≥digo Pix copiado', showConfirmButton: false, timer: 1800 });
            });
          }
        });
      }

      if (val === 'Dinheiro') {
        if (total <= 0) {
          await Swal.fire({ icon: 'info', title: 'Carrinho vazio', text: 'Adicione itens para calcular o troco.' });
          paymentInput.value = ''; return;
        }
        const { value: cash } = await Swal.fire({
          title: 'Valor em dinheiro',
          input: 'number',
          inputLabel: `Total: ${formatBRL(total)} ‚Äî informe o valor entregue`,
          inputAttributes: { step: '0.01', min: String(total) },
          confirmButtonText: 'Calcular troco',
          showCancelButton: true
        });
        if (cash !== undefined && cash !== null && cash !== '') {
          const value = parseFloat(cash);
          if (isNaN(value) || value < total) {
            await Swal.fire({ icon: 'warning', title: 'Valor insuficiente', text: 'O valor entregue √© menor que o total.' });
            paymentInput.value = ''; return;
          }
          const troco = value - total;
          const notesEl = document.getElementById('notes');
          const prefix = notesEl.value.trim() ? notesEl.value.trim() + ' | ' : '';
          notesEl.value = `${prefix}Troco para: ${formatBRL(value)} (troco: ${formatBRL(troco)})`;
          await Swal.fire({ icon: 'success', title: 'Troco calculado', text: `Troco: ${formatBRL(troco)}. Observa√ß√£o atualizada.` });
          updateCurrentItem(); // reflete observa√ß√µes no item atual
        } else {
          paymentInput.value = '';
        }
      }
    });

    // WhatsApp + Firestore
    sendWhatsappBtn.addEventListener('click', () => {
      if (cart.length === 0) return alert('Adicione pelo menos um a√ßa√≠ ao carrinho.');
      if (!nameInput.value.trim()) return alert('Informe seu nome.');
      if (!phoneInput.value.trim()) return alert('Informe seu telefone.');
      if (!addressInput.value.trim()) return alert('Informe seu endere√ßo.');
      if (!neighborhoodInput.value) return alert('Informe seu bairro.');
      if (!paymentInput.value) return alert('Selecione a forma de pagamento.');

      const total = cart.reduce((sum, i) => sum + i.price, 0);

      const itemsText = cart.map((item, idx) => [
        `#${idx + 1}`,
        `‚Ä¢ Copo: ${item.size}ml`,
        `‚Ä¢ Pre√ßo: ${formatBRL(item.price)}`,
        `‚Ä¢ Frutas: ${item.fruits.join(', ') || '-'}`,
        `‚Ä¢ Ingredientes: ${item.ingredients.join(', ') || '-'}`,
        `‚Ä¢ Cobertura: ${item.topping || '-'}`,
        item.notes ? `‚Ä¢ Observa√ß√µes do item: ${item.notes}` : null
      ].filter(Boolean).join('\n')).join('\n\n');

      const customerFields = [
        `Cliente: ${nameInput.value.trim()}`,
        `Telefone: ${phoneInput.value.trim()}`,
        `Endere√ßo: ${addressInput.value.trim()}`,
        `Bairro: ${neighborhoodInput.value}`,
        `Pagamento: ${paymentInput.value}`
      ].join('\n');

      const message = [
        'Pedido ‚Äî A√ßaiteria Itinga',
        '==============================',
        itemsText,
        '==============================',
        `Total: ${formatBRL(total)}`,
        '',
        customerFields
      ].join('\n');

      const phone = '559992247544';
      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');

      const pedido = {
        cliente: nameInput.value.trim(),
        telefone: phoneInput.value.trim(),
        endereco: addressInput.value.trim(),
        bairro: neighborhoodInput.value,
        pagamento: paymentInput.value,
        observacoes: currentItem.notes, // observa√ß√£o do √∫ltimo copo montado
        itens: cart,
        total,
        data: new Date().toISOString()
      };
      window.__salvarPedido?.(pedido);

      setTimeout(() => location.reload(), 1000);
    });

    // Helpers: Pix BR Code (EMV)
    function buildPixBRCode({ key, name, city, amount, txid = 'ACAI' }) {
      const tlv = (id, value) => id + String(value.length).padStart(2, '0') + value;
      const gui = tlv('00', 'BR.GOV.BCB.PIX');
      const mAccountInfo = tlv('26', gui + tlv('01', key));
      const mc = tlv('52', '0000');
      const cur = tlv('53', '986');
      const amt = tlv('54', Number(amount).toFixed(2));
      const cc = tlv('58', 'BR');
      const nm = tlv('59', (name || '').slice(0, 25));
      const ct = tlv('60', (city || '').slice(0, 15));
      const add = tlv('62', tlv('05', (txid || '').slice(0, 25)));
      const pfi = tlv('00', '01');
      const poi = tlv('01', '12');
      let payload = pfi + poi + mAccountInfo + mc + cur + amt + cc + nm + ct + add;
      payload += '63' + '04';
      const crc = crc16(payload);
      payload += crc;
      return payload;
    }
    function crc16(payload) {
      let crc = 0xFFFF; const poly = 0x1021;
      const bytes = new TextEncoder().encode(payload);
      for (let b of bytes) {
        crc ^= (b << 8);
        for (let i = 0; i < 8; i++) {
          if (crc & 0x8000) { crc = (crc << 1) ^ poly } else { crc = (crc << 1) }
          crc &= 0xFFFF;
        }
      }
      return crc.toString(16).toUpperCase().padStart(4, '0');
    }

    // Menu lateral
    const btnMenu = document.getElementById("btnMenu");
    const sideMenu = document.getElementById("sideMenu");
    const closeMenu = document.getElementById("closeMenu");
    btnMenu.addEventListener("click", () => sideMenu.classList.add("open"));
    closeMenu.addEventListener("click", () => sideMenu.classList.remove("open"));

    // Formul√°rio feedback -> WhatsApp
    document.getElementById("feedbackForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const text = document.getElementById("feedbackText").value.trim();
      if (!text) return alert("Digite sua mensagem.");
      const url = `https://wa.me/5599992247544?text=${encodeURIComponent("Feedback: " + text)}`;
      window.open(url, "_blank");
      sideMenu.classList.remove("open");
      document.getElementById("feedbackText").value = "";
    });
  </script>
</body>
</html>






<!-- // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBA4Vw5sqCEcrOfU61HTa4XZWRqsMuvUzg",
  authDomain: "acai123-4ad1a.firebaseapp.com",
  projectId: "acai123-4ad1a",
  storageBucket: "acai123-4ad1a.firebasestorage.app",
  messagingSenderId: "423472519123",
  appId: "1:423472519123:web:b8795b57e347f473d7c126",
  measurementId: "G-K86FBM1JE5"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app); -->